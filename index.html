<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>골프 예약 시스템</title>
    <!-- Tailwind CSS: 스타일링을 위한 라이브러리 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- PapaParse: CSV 파일 처리를 위한 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .calendar-container { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }
        @media (max-width: 768px) { .calendar-container { grid-template-columns: 1fr; } }
        .day-cell { min-height: 50px; display: flex; flex-direction: column; justify-content: flex-start; align-items: center; cursor: pointer; }
        .booking-info { font-size: 10px; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background-color: white; padding: 32px; border-radius: 16px; width: 90%; max-width: 480px; }
        #anonymousView table th, #anonymousView table td { text-align: center; border: 1px solid #e5e7eb; padding: 4px; font-size: 0.75rem; }
        #anonymousView table th { background-color: #f9fafb; }
        #lookupResults table th, #lookupResults table td { border: 1px solid #e2e8f0; padding: 8px; text-align: center; }
        #lookupResults table th { background-color: #f8fafc; }
    </style>
</head>
<body class="bg-gray-100 p-8 md:p-16">

    <!-- 로그인 화면 -->
    <div id="loginScreen" class="flex flex-col items-center justify-center min-h-screen">
        <div class="bg-white rounded-3xl shadow-lg p-8 w-full max-w-sm">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">로그인</h2>
            <form id="loginForm" class="space-y-4">
                <div>
                    <label for="loginUsername" class="block text-sm font-medium text-gray-700">아이디 (이름)</label>
                    <input type="text" id="loginUsername" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500">
                </div>
                <div>
                    <label for="loginPassword" class="block text-sm font-medium text-gray-700">비밀번호</label>
                    <input type="password" id="loginPassword" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500">
                </div>
                
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <input id="rememberMe" name="remember-me" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="rememberMe" class="ml-2 block text-sm text-gray-900">아이디 저장</label>
                    </div>
                </div>

                <button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg">로그인</button>
            </form>
        </div>
    </div>

    <!-- 메인 앱 -->
    <div id="mainApp" class="hidden">
        <div class="bg-white rounded-3xl shadow-lg p-6 md:p-12 max-w-7xl mx-auto">
            <header class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
                <div class="flex-grow">
                    <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900">골프 예약 시스템</h1>
                    <a href="#" id="noticeLink" class="text-sm text-blue-600 hover:underline">이용 및 취소 안내(2025.9월)</a>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="openModalBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg transform transition-transform active:scale-95">+ 신청</button>
                    <button id="logoutBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-6 rounded-full shadow-lg">로그아웃</button>
                </div>
            </header>
            <div class="mb-4 border-b border-gray-200">
                <nav class="flex space-x-4" aria-label="Tabs">
                    <button id="calendarTabBtn" class="px-3 py-2 font-medium text-sm rounded-md text-white bg-lime-500">캘린더</button>
                    <button id="statusTabBtn" class="px-3 py-2 font-medium text-sm rounded-md text-gray-500 hover:text-gray-700">현황</button>
                    <button id="lookupTabBtn" class="px-3 py-2 font-medium text-sm rounded-md text-gray-500 hover:text-gray-700 hidden">조회</button>
                    <button id="anonymousTabBtn" class="px-3 py-2 font-medium text-sm rounded-md text-gray-500 hover:text-gray-700 hidden">무기명</button>
                </nav>
            </div>
            <div id="calendarView" class="tab-content">
                <div id="golfCourseFilterContainer" class="mb-4 p-4 bg-gray-50 rounded-lg border"></div>
                <div id="calendar" class="calendar-container"></div>
            </div>
            <div id="statusView" class="tab-content hidden">
                 <div class="flex flex-col md:flex-row justify-between items-center mb-4 gap-4">
                    <div id="statusFilterContainer" class="flex flex-wrap items-center gap-x-4 gap-y-2">
                    </div>
                    <div class="flex gap-2">
                        <div id="adminOnlyControls" class="flex gap-2 hidden">
                            <button id="downloadExcelBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-full">엑셀 다운로드</button>
                            <button id="uploadExcelBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full">엑셀 업로드</button>
                        </div>
                        <button id="cancelSelectedBtn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-6 rounded-full hidden transform transition-transform active:scale-95">선택 취소</button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white rounded-lg shadow-sm">
                        <thead id="statusTableHead" class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
                            <tr>
                                <th class="py-3 px-6 text-left">선택</th>
                                <th class="py-3 px-6 text-left cursor-pointer" data-sort="Golf Course">Golf Course <span class="sort-indicator"></span></th>
                                <th class="py-3 px-6 text-left cursor-pointer" data-sort="Name">Name <span class="sort-indicator"></span></th>
                                <th class="py-3 px-6 text-left cursor-pointer" data-sort="Date">Date <span class="sort-indicator"></span></th>
                                <th class="py-3 px-6 text-left cursor-pointer" data-sort="Team">Team <span class="sort-indicator"></span></th>
                                <th class="py-3 px-6 text-left cursor-pointer" data-sort="Time">Time <span class="sort-indicator"></span></th>
                                <th class="py-3 px-6 text-left cursor-pointer" data-sort="Status">Status <span class="sort-indicator"></span></th>
                                <th class="py-3 px-6 text-left cursor-pointer" data-sort="Comment">Comment <span class="sort-indicator"></span></th>
                            </tr>
                        </thead>
                        <tbody id="statusTableBody" class="text-gray-600 text-sm font-light"></tbody>
                    </table>
                </div>
            </div>
            <div id="lookupView" class="tab-content hidden">
                <div class="bg-gray-50 p-4 rounded-lg border mb-4">
                    <div class="flex flex-col md:flex-row items-center gap-4">
                         <div class="flex items-center gap-2">
                             <label for="lookupName" class="text-sm font-medium text-gray-700">성명</label>
                             <input type="text" id="lookupName" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm">
                         </div>
                         <div class="flex items-center gap-2">
                            <label for="lookupDate" class="text-sm font-medium text-gray-700">일자</label>
                            <input type="date" id="lookupDate" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm">
                         </div>
                         <button id="lookupBtn" class="w-full md:w-auto bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-full self-end">조회</button>
                    </div>
                </div>
                <div id="lookupResults" class="mt-6 space-y-6"></div>
            </div>
            <div id="anonymousView" class="tab-content hidden">
                <div class="flex justify-end mb-4">
                    <select id="anonymousYearSelector" class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5">
                        <option value="2024">2024년</option>
                        <option value="2025">2025년</option>
                    </select>
                </div>
                <div id="anonymousTableContainer" class="overflow-x-auto"></div>
            </div>
        </div>
    </div>

    <!-- 예약 신청/수정 모달 -->
    <div id="bookingModal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="modalTitle" class="text-2xl font-bold mb-6 text-gray-800">예약 신청</h2>
            <form id="bookingForm" class="space-y-4">
                <input type="hidden" id="bookingId">
                <div><label for="userName" class="block text-sm font-medium text-gray-700">Name</label><input type="text" id="userName" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"></div>
                <div><label for="bookingDate" class="block text-sm font-medium text-gray-700">Date</label><input type="date" id="bookingDate" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"></div>
                <div><label for="golfCourse" class="block text-sm font-medium text-gray-700">Golf Course</label><select id="golfCourse" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md bg-white"></select></div>
                <div><label for="numberOfTeams" class="block text-sm font-medium text-gray-700">Team</label><input type="number" id="numberOfTeams" min="1" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"></div>
                <div><label for="bookingTime" class="block text-sm font-medium text-gray-700">Time</label><input type="time" id="bookingTime" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"></div>
                <div><label for="bookingStatus" class="block text-sm font-medium text-gray-700">Status</label><input type="text" id="bookingStatus" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"></div>
                <div><label for="notes" class="block text-sm font-medium text-gray-700">Comment</label><input type="text" id="notes" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"></div>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="button" id="closeModalBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-full">취소</button>
                    <button type="submit" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-full transform transition-transform active:scale-95">저장</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 공지사항 모달 -->
    <div id="noticeModal" class="modal-overlay">
        <div class="modal-content relative max-w-3xl max-h-[80vh] overflow-y-auto">
            <button id="closeNoticeBtn" class="absolute top-4 right-4 text-2xl text-gray-500 hover:text-gray-800">&times;</button>
            <h2 class="text-2xl font-bold mb-2 text-center text-gray-800">골프예약시스템 안내</h2>
            <p class="text-sm text-center text-gray-500 mb-6">[2025.09월, 인사총무팀]</p>
            <div class="prose max-w-none text-gray-700 space-y-4">
                <div>
                    <h3 class="text-lg font-bold">신청가능 골프회원권 현황</h3>
                    <div class="pl-4 mt-2 space-y-3">
                        <div>
                            <h4 class="font-semibold">1. 무기명회원권</h4>
                            <p class="text-sm">이용방식 : 각 법인 배정 횟수 내 무기명 사용 (1팀 회원가 적용)</p>
                            <ul class="list-disc list-inside text-sm space-y-1 mt-1">
                                <li><strong>📍 레이크우드CC</strong>
                                    <ul class="list-['-_'] list-inside ml-4">
                                        <li>월 이용횟수 : 주중 9회, 주말 6회</li>
                                        <li>배정대상 : 주중(국내영업팀 등 9개팀), 주말(국내영업담당임원 등 6명)</li>
                                    </ul>
                                </li>
                                <li><strong>📍 세라지오CC</strong>
                                    <ul class="list-['-_'] list-inside ml-4">
                                        <li>월 이용횟수 : 주중 5회, 주말 3회</li>
                                        <li>대체 이용 : 스카이밸리 1회 대체 사용 가능</li>
                                        <li>배정현황 : 기명회원권 미보유 정회원 등(주중 3회, 주말 2회)</li>
                                        <li>신청 가능 잔여분 : 주중 2회, 주말 1회</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold">2. 선불제회원권</h4>
                            <ul class="list-disc list-inside text-sm space-y-1 mt-1">
                                <li><strong>대상 골프장</strong> : 스카이밸리CC, 힐드로사이CC</li>
                                <li><strong>비용 구조</strong> : 총 비용 80만원/팀 (선불금에서 차감)</li>
                                <li><strong>지원 내역</strong> : 인사총무팀 지원(50만원), 개인/공통접대비(30만원)</li>
                                <li><strong>적용가격</strong> : 일반 인터넷회원가 (회원특가 없음)</li>
                                <li><strong>⚠️ 주의사항</strong> : 반기말(6월/12월) 인사총무팀에서 접대비 일괄 차감. 접대비 사용시 차감 금액을 미리 고려하여 사용 필요</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-bold">🎯 골프장 예약방법</h3>
                    <ul class="list-disc list-inside text-sm space-y-1 mt-2">
                        <li><strong>무기명/선불제회원권</strong>: 골프 예약 시스템을 통한 예약</li>
                        <li><strong>오픈 순서</strong> : 임원 → 국내영업팀 9개팀 → 국내영업 외 팀 (오픈 주기: 반기초마다)</li>
                        <li><strong>기타 예약</strong> : 월 횟수 미배정 또는 대중 오픈 예약일 이용 희망시 담당자(신석중 과장)에게 연락</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold">❌ 예약취소</h3>
                     <ul class="list-disc list-inside text-sm space-y-1 mt-2">
                        <li><strong>일반 취소</strong>: 시스템 취소는 티오프일 8일 전까지 가능 (골프장별 취소기준 상이)</li>
                        <li><strong>우천취소</strong>: 골프장 기준에 따라 가능, 당일 골프장에 직접 연락 후 취소 진행</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold">⏰ 티오프 당일 안내</h3>
                    <ul class="list-disc list-inside text-sm space-y-1 mt-2">
                        <li><strong>체크인</strong>: 티오프 시간 30분 전 체크인 완료</li>
                        <li><strong>특이사항 통보</strong>: 티오프 후 특이사항 발생시 당일 또는 익영업일에 담당자(신석중 과장)에게 메모 전달</li>
                        <li><strong>우천으로 인한 취소</strong>: 홀아웃 등으로 인한 차감금액 상이 등</li>
                    </ul>
                </div>
                 <div>
                    <h3 class="text-lg font-bold">📞 문의사항</h3>
                     <p class="text-sm mt-2">신석중 과장 (인사총무팀)</p>
                </div>
            </div>
        </div>
    </div>

    <div id="loadingOverlay" class="modal-overlay" style="display: none;">
        <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"></div>
    </div>

    <script>
// ... (The JavaScript code remains the same as the previous correct version, so it's omitted here for brevity. The provided code above includes the corrected JavaScript.) ...
    </script>
</body>
</html>

